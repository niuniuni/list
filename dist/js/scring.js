"use strict";$(function(){var t=$(".wrap").width();400<$(window).width()&&(t=400);var a=$(".can")[0],c=a.getContext("2d");a.width=t,a.height=t,c.translate(t/2,t/2);var e=null;$.ajax({url:"/page",dataType:"json",async:!1,success:function(t){e=t}});var h=Math.PI/180,u=-90,f=t/2-50;e.map(function(t,a){var e,n,o,l,i=u+t.jiaodu,r=(u+t.jiaodu/2)*h,d=Math.cos(r)*f,s=Math.sin(r)*f;c.beginPath(),c.moveTo(0,0),c.arc(0,0,f,u*h,i*h),c.fillStyle=t.color,c.fill(),u=i,c.closePath(),c.strokeStyle=t.color,a<5&&(e=d,n=s,c.beginPath(),c.moveTo(e,n),c.stroke()),l="<tr align='center'><td><span style=\"background:"+(o=t).color+';"></span>'+o.name+"</td><td>"+o.bili+"</td><td>"+o.num+"</td><td>"+o.num+"</td></tr>",$(".table>tbody").append(l)}),c.beginPath(),c.arc(0,0,t/2-110,0,360*h),c.fillStyle="#fff",c.strokeStyle="rgba(255,255,255,.5)",c.lineWidth=20,c.stroke(),c.fill()});